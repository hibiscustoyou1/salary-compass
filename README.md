# Full-Stack App Template (Vue 3 + Express + Prisma)

è¿™æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„å…¨æ ˆåº”ç”¨å¼€å‘æ¨¡ç‰ˆï¼Œé‡‡ç”¨ Monorepo ç»“æ„ç»„ç»‡ä»£ç ã€‚å‰ç«¯è¿½æ±‚æè‡´çš„æ„å»ºé€Ÿåº¦ä¸å¼€å‘ä½“éªŒï¼Œåç«¯æä¾›ç¨³å¥çš„ç±»å‹å®‰å…¨æ¥å£ä¸æ•°æ®ç®¡ç†ã€‚

å¾—ç›Šäºç²¾å¿ƒè®¾è®¡çš„ TypeScript é…ç½®ä½“ç³»ï¼Œæœ¬é¡¹ç›®å®ç°äº†å‰åç«¯ç±»å‹ï¼ˆTypesï¼‰çš„å®Œå…¨å…±äº«ä¸è¿è¡Œç¯å¢ƒï¼ˆNode.js vs Browserï¼‰çš„ä¸¥æ ¼éš”ç¦»ã€‚

## âœ¨ æŠ€æœ¯æ ˆ (Tech Stack)

### ğŸ–¥ï¸ å‰ç«¯ (Apps/Client)

- **æ ¸å¿ƒæ¡†æ¶:** [Vue 3](https://vuejs.org/) (v3.5+)
- **æ„å»ºå·¥å…·:** [Vite](https://vitejs.dev/) (é…ç½®äº†é’ˆå¯¹ Bundler çš„ TS è§£æç­–ç•¥)
- **çŠ¶æ€ç®¡ç†:** [Pinia](https://pinia.vuejs.org/)
- **è·¯ç”±ç®¡ç†:** [Vue Router](https://router.vuejs.org/)
- **UI æ ·å¼:** [Tailwind CSS](https://tailwindcss.com/) + PostCSS
- **è¯­è¨€:** TypeScript (DOM ç¯å¢ƒä¸¥æ ¼æ¨¡å¼)

### âš™ï¸ åç«¯ (Apps/Server)

- **è¿è¡Œæ—¶:** [Node.js](https://nodejs.org/) (æ¨è LTS v20+)
- **Web æ¡†æ¶:** [Express](https://expressjs.com/) (v5.1+)
- **ORM:** [Prisma](https://www.prisma.io/)
- **æ‰“åŒ…:** Esbuild (é…åˆ CommonJS ç¯å¢ƒé…ç½®)
- **è¯­è¨€:** TypeScript (Node ç¯å¢ƒä¸¥æ ¼æ¨¡å¼)

### ğŸ“¦ å…±äº«åŒ… (Packages)

- **@repo/shared:** å‰åç«¯å…±ç”¨çš„ç±»å‹å®šä¹‰ï¼ˆType Definitionsï¼‰å’Œå¸¸é‡ã€‚
- **@repo/tsconfig:** ç»Ÿä¸€çš„ TypeScript ç¼–è¯‘é…ç½®ä¸­å¿ƒï¼Œæä¾›åˆ†å±‚ç¯å¢ƒé¢„è®¾ã€‚

## ğŸ—ï¸ é¡¹ç›®ç»“æ„ (Structure)

```text
myapp
â”œâ”€â”€ apps/                # ä¸šåŠ¡åº”ç”¨ç›®å½•
â”‚   â”œâ”€â”€ client/          # å‰ç«¯åº”ç”¨ (Vue 3 + Vite)
â”‚   â””â”€â”€ server/          # åç«¯æœåŠ¡ (Express + Prisma)
â”œâ”€â”€ packages/            # å…±äº«å·¥ä½œåŒº
â”‚   â”œâ”€â”€ shared/          # å…±äº«ä»£ç åº“ (Types & Utils)
â”‚   â””â”€â”€ tsconfig/        # TS é…ç½®ä¸­å¿ƒ (Base, Node, DOM)
â”œâ”€â”€ dist/                # æ„å»ºäº§ç‰© (è‡ªåŠ¨ç”Ÿæˆ)
â”œâ”€â”€ package.json         # æ ¹ç›®å½•è„šæœ¬
â””â”€â”€ pnpm-workspace.yaml  # Workspace å®šä¹‰
```

## ğŸ›¡ï¸ å·¥ç¨‹åŒ–ç‰¹ç‚¹ (Engineering Features)

æœ¬é¡¹ç›®é‡‡ç”¨äº†åˆ†å±‚çš„ TypeScript Configuration ç­–ç•¥ï¼š

1. **Base (åŸºç¡€å±‚)**: è§„å®šä»£ç è´¨é‡ä¸ä¸¥æ ¼æ¨¡å¼ (Strict Mode)ã€‚
2. **Environment (ç¯å¢ƒå±‚)**:
  + node.json: ä¸“ä¸ºåç«¯å’Œæ„å»ºè„šæœ¬è®¾è®¡ (CommonJS, Node Types)ã€‚
  + dom.json: ä¸“ä¸ºå‰ç«¯ä¸šåŠ¡ä»£ç è®¾è®¡ (ESNext, DOM Types, Bundler Resolution)ã€‚
3. **End-to-End Type Safety**: åç«¯ API çš„å“åº”ç±»å‹ç›´æ¥é€šè¿‡ @repo/shared æš´éœ²ç»™å‰ç«¯ï¼Œä¿®æ”¹åç«¯ç»“æ„ï¼Œå‰ç«¯ç«‹å³æ„ŸçŸ¥æŠ¥é”™ã€‚

## ğŸ“‹ å‰ç½®è¦æ±‚ (Prerequisites)

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨çš„å¼€å‘ç¯å¢ƒä¸­å·²å®‰è£…ä»¥ä¸‹å·¥å…·ï¼š

* **Node.js** (æ¨è >= 20)
* **PNPM** (å¿…é¡»å®‰è£…ï¼Œæœ¬é¡¹ç›®ä¾èµ– workspaces åŠŸèƒ½)

å¦‚æœæ‚¨å°šæœªå®‰è£… PNPMï¼Œè¯·è¿è¡Œï¼š

```bash
npm install -g pnpm
```

## ğŸš€ å¿«é€Ÿå¼€å§‹ (Getting Started)

è¯·åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ä¾æ¬¡æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. **å®‰è£…ä¾èµ–**
   å®‰è£…æ ¹ç›®å½•åŠæ‰€æœ‰å·¥ä½œåŒºï¼ˆclient/serverï¼‰çš„ä¾èµ–ã€‚
    ```bash
    pnpm install
    ```

2. **é…ç½®ç¯å¢ƒ (æ¨è)**
   > âš ï¸ **æ³¨æ„**ï¼šç”±äºåç«¯ä½¿ç”¨äº† Prismaï¼Œå»ºè®®åœ¨å¯åŠ¨å‰é…ç½®æ•°æ®åº“è¿æ¥ã€‚

   + .env.enc åˆå§‹å¯†ç ä¸º `default`
   + ä½¿ç”¨ `VAULT_PASS=default pnpm vault:dec` å‘½ä»¤è·å–åˆå§‹æ¨¡æ¿ `.env` é…ç½®ï¼ˆæˆ–è€…åˆ é™¤ `.env.enc` ç›´æ¥æ‰‹åŠ¨åˆ›å»º `.env`ï¼‰
   + ä½¿ç”¨ `VAULT_PASS=xxx pnpm vault:enc` å‘½ä»¤é‡æ–°ç”Ÿæˆ `.env.enc`

3. ç”Ÿæˆ Prisma Client ç”Ÿæˆæ•°æ®åº“å®¢æˆ·ç«¯ä»£ç ã€‚
   ```Bash
   pnpm db:migrate --name dev
   pnpm db:gen
   ```

4. æ„å»ºé¡¹ç›® å¹¶è¡Œæ„å»ºå‰ç«¯å’Œåç«¯ï¼Œå¹¶ç”Ÿæˆç»Ÿä¸€çš„éƒ¨ç½²åŒ…ã€‚
   ```Bash
   pnpm build
   ```
5. å¯åŠ¨å¼€å‘ç¯å¢ƒ åŒæ—¶å¯åŠ¨å‰ç«¯å’Œåç«¯æœåŠ¡ï¼ˆçƒ­æ›´æ–°æ¨¡å¼ï¼‰ã€‚
   ```Bash
   pnpm dev
   ```

---

## ğŸŒ ç”Ÿäº§ç¯å¢ƒé¢„è§ˆ
æ‰§è¡Œ pnpm build åï¼Œä½ å¯ä»¥æ¨¡æ‹Ÿç”Ÿäº§ç¯å¢ƒè¿è¡Œï¼š

```Bash
pnpm start
```
æ­¤æ—¶è®¿é—® http://localhost:3000ï¼Œä½ å°†çœ‹åˆ°ç”± Express æœåŠ¡æ‰˜ç®¡çš„å®Œæ•´åº”ç”¨ï¼ˆAPI + é™æ€é¡µé¢ï¼‰ã€‚

---

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤è¯´æ˜

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤è¯´æ˜

| å‘½ä»¤                | è¯´æ˜                                          |
|:------------------|:--------------------------------------------|
| `pnpm install`    | å®‰è£…æ‰€æœ‰ä¾èµ–                                      |
| `pnpm dev`        | å¯åŠ¨å¼€å‘æœåŠ¡å™¨ (Client + Server çƒ­æ›´æ–°æ¨¡å¼)             |
| `pnpm build`      | æ¸…ç†ã€å¹¶è¡Œæ„å»ºã€æ•´åˆäº§ç‰©åˆ° `dist/`                       |
| `pnpm start`      | è¿è¡Œæ„å»ºåçš„ç”Ÿäº§ç¯å¢ƒä»£ç  (`node dist/server`)           |
| `pnpm db:gen`     | ç”Ÿæˆ Prisma ç±»å‹å®šä¹‰ (æ¯æ¬¡ä¿®æ”¹ schema åè¿è¡Œ)            |
| `pnpm db:migrate` | æ‰§è¡Œæ•°æ®åº“è¿ç§» (åŒæ­¥ schema åˆ°æ•°æ®åº“)                    |
| `pnpm vault:enc`  | **åŠ å¯†**ï¼šå°† `.env` åŠ å¯†ä¸º `.env.enc` (æäº¤ä»£ç å‰è¿è¡Œ)    |
| `pnpm vault:dec`  | **è§£å¯†**ï¼šå°† `.env.enc` è§£å¯†ä¸º `.env` (æ‹‰å–ä»£ç /éƒ¨ç½²æ—¶è¿è¡Œ) |
